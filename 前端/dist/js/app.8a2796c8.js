(function(){var e={3711:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});a(1454);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-container"},[t("div",{staticClass:"admin-header"},[t("h1",[e._v("ç®¡ç†å‘˜é¡µé¢")]),t("button",{staticClass:"logout-btn",on:{click:e.logout}},[e._v("é€€å‡ºç™»å½•")])]),t("div",{staticClass:"admin-tabs"},e._l(e.tabs,(function(a){return t("button",{key:a.id,class:{active:e.currentTab===a.id},on:{click:function(t){e.currentTab=a.id}}},[e._v(" "+e._s(a.name)+" ")])})),0),"users"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("ç”¨æˆ·ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userSearch,expression:"userSearch"}],attrs:{placeholder:"æœç´¢ç”¨æˆ·å"},domProps:{value:e.userSearch},on:{input:function(t){t.target.composing||(e.userSearch=t.target.value)}}}),t("button",{on:{click:e.searchUsers}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddUser=!0}}},[e._v("æ·»åŠ ç”¨æˆ·")])]),e.showAddUser?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.username,expression:"newUser.username"}],attrs:{placeholder:"ç”¨æˆ·å"},domProps:{value:e.newUser.username},on:{input:function(t){t.target.composing||e.$set(e.newUser,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{type:"password",placeholder:"å¯†ç "},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.isAdmin,expression:"newUser.isAdmin"}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.newUser.isAdmin)?e._i(e.newUser.isAdmin,null)>-1:e._q(e.newUser.isAdmin,1)},on:{change:function(t){var a=e.newUser.isAdmin,n=t.target,r=n.checked?1:0;if(Array.isArray(a)){var s=null,i=e._i(a,s);n.checked?i<0&&e.$set(e.newUser,"isAdmin",a.concat([s])):i>-1&&e.$set(e.newUser,"isAdmin",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.newUser,"isAdmin",r)}}}),e._v(" ç®¡ç†å‘˜ ")]),t("button",{on:{click:e.addUser}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddUser=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(0),t("tbody",e._l(e.users,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.username,expression:"user.editData.username"}],domProps:{value:a.editData.username},on:{input:function(t){t.target.composing||e.$set(a.editData,"username",t.target.value)}}}):t("span",[e._v(e._s(a.username))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.password,expression:"user.editData.password"}],attrs:{type:"password"},domProps:{value:a.editData.password},on:{input:function(t){t.target.composing||e.$set(a.editData,"password",t.target.value)}}}):t("span",[e._v(e._s(a.password))])]),t("td",[a.editing?t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.isAdmin,expression:"user.editData.isAdmin"}],attrs:{type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(a.editData.isAdmin)?e._i(a.editData.isAdmin,null)>-1:e._q(a.editData.isAdmin,1)},on:{change:function(t){var n=a.editData.isAdmin,r=t.target,s=r.checked?1:0;if(Array.isArray(n)){var i=null,o=e._i(n,i);r.checked?o<0&&e.$set(a.editData,"isAdmin",n.concat([i])):o>-1&&e.$set(a.editData,"isAdmin",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(a.editData,"isAdmin",s)}}}),e._v(" "+e._s(1===a.editData.isAdmin?"ç®¡ç†å‘˜":"æ™®é€šç”¨æˆ·")+" ")]):t("span",[e._v(e._s(1===a.isAdmin?"ç®¡ç†å‘˜":"æ™®é€šç”¨æˆ·"))])]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEdit(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEdit(a)}}},[e._v("å–æ¶ˆ")])]:t("button",{on:{click:function(t){return e.startEdit(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteUser(a.id)}}},[e._v("åˆ é™¤")])],2)])})),0)])]):e._e(),"products"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("ç»¿è‰²äº§å“ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.productSearch,expression:"productSearch"}],attrs:{placeholder:"æœç´¢äº§å“åç§°"},domProps:{value:e.productSearch},on:{input:function(t){t.target.composing||(e.productSearch=t.target.value)}}}),t("button",{on:{click:e.searchProducts}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddProduct=!0}}},[e._v("æ·»åŠ äº§å“")])]),e.showAddProduct?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.name,expression:"newProduct.name"}],attrs:{placeholder:"äº§å“åç§°"},domProps:{value:e.newProduct.name},on:{input:function(t){t.target.composing||e.$set(e.newProduct,"name",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.description,expression:"newProduct.description"}],attrs:{placeholder:"äº§å“æè¿°"},domProps:{value:e.newProduct.description},on:{input:function(t){t.target.composing||e.$set(e.newProduct,"description",t.target.value)}}}),t("button",{on:{click:e.addProduct}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddProduct=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(1),t("tbody",e._l(e.products,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.name,expression:"product.editData.name"}],domProps:{value:a.editData.name},on:{input:function(t){t.target.composing||e.$set(a.editData,"name",t.target.value)}}}):t("span",[e._v(e._s(a.name))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.description,expression:"product.editData.description"}],domProps:{value:a.editData.description},on:{input:function(t){t.target.composing||e.$set(a.editData,"description",t.target.value)}}}):t("span",[e._v(e._s(a.description))])]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEditProduct(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditProduct(a)}}},[e._v("å–æ¶ˆ")])]:t("button",{on:{click:function(t){return e.startEditProduct(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteProduct(a.id)}}},[e._v("åˆ é™¤")])],2)])})),0)])]):e._e(),"garbage"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("åƒåœ¾åˆ†ç±»ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.garbageSearch,expression:"garbageSearch"}],attrs:{placeholder:"æœç´¢åƒåœ¾åç§°"},domProps:{value:e.garbageSearch},on:{input:function(t){t.target.composing||(e.garbageSearch=t.target.value)}}}),t("button",{on:{click:e.searchGarbageItems}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddGarbage=!0}}},[e._v("æ·»åŠ åƒåœ¾é¡¹")])]),e.showAddGarbage?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newGarbageItem.name,expression:"newGarbageItem.name"}],attrs:{placeholder:"åƒåœ¾åç§°"},domProps:{value:e.newGarbageItem.name},on:{input:function(t){t.target.composing||e.$set(e.newGarbageItem,"name",t.target.value)}}}),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newGarbageItem.category,expression:"newGarbageItem.category"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newGarbageItem,"category",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"å¯å›æ”¶ç‰©"}},[e._v("å¯å›æ”¶ç‰©")]),t("option",{attrs:{value:"æœ‰å®³åƒåœ¾"}},[e._v("æœ‰å®³åƒåœ¾")]),t("option",{attrs:{value:"å¨ä½™åƒåœ¾"}},[e._v("å¨ä½™åƒåœ¾")]),t("option",{attrs:{value:"å…¶ä»–åƒåœ¾"}},[e._v("å…¶ä»–åƒåœ¾")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newGarbageItem.description,expression:"newGarbageItem.description"}],attrs:{placeholder:"åˆ†ç±»è¯´æ˜"},domProps:{value:e.newGarbageItem.description},on:{input:function(t){t.target.composing||e.$set(e.newGarbageItem,"description",t.target.value)}}}),t("button",{on:{click:e.addGarbageItem}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddGarbage=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(2),t("tbody",e._l(e.garbageItems,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.name,expression:"item.editData.name"}],domProps:{value:a.editData.name},on:{input:function(t){t.target.composing||e.$set(a.editData,"name",t.target.value)}}}):t("span",[e._v(e._s(a.name))])]),t("td",[a.editing?t("select",{directives:[{name:"model",rawName:"v-model",value:a.editData.category,expression:"item.editData.category"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.editData,"category",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:"å¯å›æ”¶ç‰©"}},[e._v("å¯å›æ”¶ç‰©")]),t("option",{attrs:{value:"æœ‰å®³åƒåœ¾"}},[e._v("æœ‰å®³åƒåœ¾")]),t("option",{attrs:{value:"å¨ä½™åƒåœ¾"}},[e._v("å¨ä½™åƒåœ¾")]),t("option",{attrs:{value:"å…¶ä»–åƒåœ¾"}},[e._v("å…¶ä»–åƒåœ¾")])]):t("span",[e._v(e._s(a.category))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.description,expression:"item.editData.description"}],domProps:{value:a.editData.description},on:{input:function(t){t.target.composing||e.$set(a.editData,"description",t.target.value)}}}):t("span",[e._v(e._s(a.description))])]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEditGarbageItem(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditGarbageItem(a)}}},[e._v("å–æ¶ˆ")])]:t("button",{on:{click:function(t){return e.startEditGarbageItem(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteGarbageItem(a.id)}}},[e._v("åˆ é™¤")])],2)])})),0)])]):e._e(),"events"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("ç¯ä¿æ´»åŠ¨ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.eventSearch,expression:"eventSearch"}],attrs:{placeholder:"æœç´¢æ´»åŠ¨..."},domProps:{value:e.eventSearch},on:{input:function(t){t.target.composing||(e.eventSearch=t.target.value)}}}),t("button",{on:{click:e.searchEvents}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddEvent=!0}}},[e._v("æ·»åŠ æ–°æ´»åŠ¨")])]),e.showAddEvent?t("div",{staticClass:"add-form"},[t("h3",[e._v("æ·»åŠ ç¯ä¿æ´»åŠ¨")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.event_name,expression:"newEvent.event_name"}],attrs:{placeholder:"æ´»åŠ¨åç§°"},domProps:{value:e.newEvent.event_name},on:{input:function(t){t.target.composing||e.$set(e.newEvent,"event_name",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.location,expression:"newEvent.location"}],attrs:{placeholder:"æ´»åŠ¨åœ°ç‚¹"},domProps:{value:e.newEvent.location},on:{input:function(t){t.target.composing||e.$set(e.newEvent,"location",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.description,expression:"newEvent.description"}],attrs:{placeholder:"æ´»åŠ¨æè¿°"},domProps:{value:e.newEvent.description},on:{input:function(t){t.target.composing||e.$set(e.newEvent,"description",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.start_date,expression:"newEvent.start_date"}],attrs:{type:"datetime-local",placeholder:"å¼€å§‹æ—¥æœŸ"},domProps:{value:e.newEvent.start_date},on:{input:function(t){t.target.composing||e.$set(e.newEvent,"start_date",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.end_date,expression:"newEvent.end_date"}],attrs:{type:"datetime-local",placeholder:"ç»“æŸæ—¥æœŸ"},domProps:{value:e.newEvent.end_date},on:{input:function(t){t.target.composing||e.$set(e.newEvent,"end_date",t.target.value)}}}),t("button",{on:{click:e.addEvent}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){e.showAddEvent=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(3),t("tbody",e._l(e.filteredEvents,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.tempData.event_name,expression:"event.tempData.event_name"}],domProps:{value:a.tempData.event_name},on:{input:function(t){t.target.composing||e.$set(a.tempData,"event_name",t.target.value)}}}):t("span",[e._v(e._s(a.event_name))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.tempData.location,expression:"event.tempData.location"}],domProps:{value:a.tempData.location},on:{input:function(t){t.target.composing||e.$set(a.tempData,"location",t.target.value)}}}):t("span",[e._v(e._s(a.location))])]),t("td",[a.editing?t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.tempData.description,expression:"event.tempData.description"}],domProps:{value:a.tempData.description},on:{input:function(t){t.target.composing||e.$set(a.tempData,"description",t.target.value)}}}):t("span",[e._v(e._s(a.description))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.tempData.start_date,expression:"event.tempData.start_date"}],attrs:{type:"datetime-local"},domProps:{value:a.tempData.start_date},on:{input:function(t){t.target.composing||e.$set(a.tempData,"start_date",t.target.value)}}}):t("span",[e._v(e._s(e.formatDate(a.start_date)))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.tempData.end_date,expression:"event.tempData.end_date"}],attrs:{type:"datetime-local"},domProps:{value:a.tempData.end_date},on:{input:function(t){t.target.composing||e.$set(a.tempData,"end_date",t.target.value)}}}):t("span",[e._v(e._s(e.formatDate(a.end_date)))])]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEditEvent(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditEvent(a)}}},[e._v("å–æ¶ˆ")])]:[t("button",{on:{click:function(t){return e.editEvent(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteEvent(a.id)}}},[e._v("åˆ é™¤")])]],2)])})),0)])]):e._e(),"items"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("é—²ç½®ç‰©å“ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.itemSearch,expression:"itemSearch"}],attrs:{placeholder:"æœç´¢ç‰©å“åç§°"},domProps:{value:e.itemSearch},on:{input:function(t){t.target.composing||(e.itemSearch=t.target.value)}}}),t("button",{on:{click:e.searchItems}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddItem=!0}}},[e._v("æ·»åŠ ç‰©å“")])]),e.showAddItem?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.item_name,expression:"newItem.item_name"}],attrs:{placeholder:"ç‰©å“åç§°"},domProps:{value:e.newItem.item_name},on:{input:function(t){t.target.composing||e.$set(e.newItem,"item_name",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newItem.item_description,expression:"newItem.item_description"}],attrs:{placeholder:"ç‰©å“æè¿°"},domProps:{value:e.newItem.item_description},on:{input:function(t){t.target.composing||e.$set(e.newItem,"item_description",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.phone_number,expression:"newItem.phone_number"}],attrs:{placeholder:"è”ç³»ç”µè¯"},domProps:{value:e.newItem.phone_number},on:{input:function(t){t.target.composing||e.$set(e.newItem,"phone_number",t.target.value)}}}),e._v(" "),t("button",{on:{click:e.addItem}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddItem=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(4),t("tbody",e._l(e.filteredItems,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.item_name,expression:"item.editData.item_name"}],domProps:{value:a.editData.item_name},on:{input:function(t){t.target.composing||e.$set(a.editData,"item_name",t.target.value)}}}):t("span",[e._v(e._s(a.item_name))])]),t("td",[a.editing?t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.editData.item_description,expression:"item.editData.item_description"}],domProps:{value:a.editData.item_description},on:{input:function(t){t.target.composing||e.$set(a.editData,"item_description",t.target.value)}}}):t("span",[e._v(e._s(a.item_description))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.phone_number,expression:"item.editData.phone_number"}],domProps:{value:a.editData.phone_number},on:{input:function(t){t.target.composing||e.$set(a.editData,"phone_number",t.target.value)}}}):t("span",[e._v(e._s(a.phone_number))])]),t("td",[e._v(e._s(e.formatDate(a.publish_date)))]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEditItem(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditItem(a)}}},[e._v("å–æ¶ˆ")])]:[t("button",{on:{click:function(t){return e.startEditItem(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteItem(a.id)}}},[e._v("åˆ é™¤")])]],2)])})),0)])]):e._e(),"orders"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("è®¢å•ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.orderSearch,expression:"orderSearch"}],attrs:{placeholder:"æœç´¢è®¢å•å•†å“åç§°"},domProps:{value:e.orderSearch},on:{input:function(t){t.target.composing||(e.orderSearch=t.target.value)}}}),t("button",{on:{click:e.searchOrders}},[e._v("æœç´¢")])]),t("table",{staticClass:"admin-table"},[e._m(5),t("tbody",e._l(e.filteredOrders,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[e._v(e._s(a.product_name))]),t("td",[e._v(e._s(a.quantity))]),t("td",[e._v(e._s(a.phone_number))]),e._v(" "),t("td",[e._v(e._s(a.address))]),t("td",[e._v(e._s(e.formatDate(a.order_date)))]),t("td",[e._v(e._s(a.status))]),t("td",["å¾…å®¡æ ¸"===a.status?t("button",{on:{click:function(t){return e.approveOrder(a.id)}}},[e._v("é€šè¿‡")]):e._e(),"å¾…å®¡æ ¸"===a.status?t("button",{on:{click:function(t){return e.rejectOrder(a.id)}}},[e._v("æ‹’ç»")]):e._e()])])})),0)]),e.showRejectDialog?t("div",{staticClass:"dialog-overlay"},[t("div",{staticClass:"dialog"},[t("h3",[e._v("è¾“å…¥æ‹’ç»åŸå› ")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.rejectReason,expression:"rejectReason"}],domProps:{value:e.rejectReason},on:{input:function(t){t.target.composing||(e.rejectReason=t.target.value)}}}),t("button",{on:{click:e.confirmReject}},[e._v("ç¡®è®¤")]),t("button",{on:{click:function(t){e.showRejectDialog=!1}}},[e._v("å–æ¶ˆ")])])]):e._e()]):e._e(),"carbon"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("å‡ç¢³è®¡ç®—å™¨ç®¡ç†")]),t("button",{on:{click:function(t){e.showAddTravelType=!0}}},[e._v("æ·»åŠ å‡ºè¡Œæ–¹å¼")]),e.showAddTravelType?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newTravelType.travel_type,expression:"newTravelType.travel_type"}],attrs:{placeholder:"å‡ºè¡Œæ–¹å¼åç§°"},domProps:{value:e.newTravelType.travel_type},on:{input:function(t){t.target.composing||e.$set(e.newTravelType,"travel_type",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newTravelType.carbon_reduction_per_unit,expression:"newTravelType.carbon_reduction_per_unit",modifiers:{number:!0}}],attrs:{type:"number",step:"0.01",placeholder:"æ¯å…¬é‡Œå‡ç¢³é‡(kg)"},domProps:{value:e.newTravelType.carbon_reduction_per_unit},on:{input:function(t){t.target.composing||e.$set(e.newTravelType,"carbon_reduction_per_unit",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),t("button",{on:{click:e.addTravelType}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddTravelType=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table"},[e._m(6),t("tbody",e._l(e.travelTypes,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.travel_type,expression:"type.editData.travel_type"}],domProps:{value:a.editData.travel_type},on:{input:function(t){t.target.composing||e.$set(a.editData,"travel_type",t.target.value)}}}):t("span",[e._v(e._s(a.travel_type))])]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.editData.carbon_reduction_per_unit,expression:"type.editData.carbon_reduction_per_unit",modifiers:{number:!0}}],attrs:{type:"number",step:"0.01"},domProps:{value:a.editData.carbon_reduction_per_unit},on:{input:function(t){t.target.composing||e.$set(a.editData,"carbon_reduction_per_unit",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}):t("span",[e._v(e._s(a.carbon_reduction_per_unit))])]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveTravelType(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditTravelType(a)}}},[e._v("å–æ¶ˆ")])]:[t("button",{on:{click:function(t){return e.editTravelType(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteTravelType(a.id)}}},[e._v("åˆ é™¤")])]],2)])})),0)])]):e._e(),"forum"===e.currentTab?t("div",{staticClass:"admin-section"},[t("h2",[e._v("è®ºå›ç®¡ç†")]),t("div",{staticClass:"search-bar"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.forumSearch,expression:"forumSearch"}],attrs:{placeholder:"æœç´¢å¸–å­æ ‡é¢˜"},domProps:{value:e.forumSearch},on:{input:function(t){t.target.composing||(e.forumSearch=t.target.value)}}}),t("button",{on:{click:e.searchForumPosts}},[e._v("æœç´¢")]),t("button",{on:{click:function(t){e.showAddForumPost=!0}}},[e._v("æ·»åŠ æ–°å¸–å­")])]),e.showAddForumPost?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newForumPost.title,expression:"newForumPost.title"}],attrs:{placeholder:"å¸–å­æ ‡é¢˜"},domProps:{value:e.newForumPost.title},on:{input:function(t){t.target.composing||e.$set(e.newForumPost,"title",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newForumPost.content,expression:"newForumPost.content"}],attrs:{placeholder:"å¸–å­å†…å®¹"},domProps:{value:e.newForumPost.content},on:{input:function(t){t.target.composing||e.$set(e.newForumPost,"content",t.target.value)}}}),t("button",{on:{click:e.addForumPost}},[e._v("æäº¤")]),t("button",{on:{click:function(t){e.showAddForumPost=!1}}},[e._v("å–æ¶ˆ")])]):e._e(),e.editingForumPost?t("div",{staticClass:"form-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingForumPost.title,expression:"editingForumPost.title"}],attrs:{placeholder:"å¸–å­æ ‡é¢˜"},domProps:{value:e.editingForumPost.title},on:{input:function(t){t.target.composing||e.$set(e.editingForumPost,"title",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editingForumPost.content,expression:"editingForumPost.content"}],attrs:{placeholder:"å¸–å­å†…å®¹"},domProps:{value:e.editingForumPost.content},on:{input:function(t){t.target.composing||e.$set(e.editingForumPost,"content",t.target.value)}}}),t("button",{on:{click:e.saveForumPost}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){e.editingForumPost=null}}},[e._v("å–æ¶ˆ")])]):e._e(),t("table",{staticClass:"admin-table forum-management-table"},[e._m(7),t("tbody",e._l(e.forumPosts,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[a.editing?t("input",{directives:[{name:"model",rawName:"v-model",value:a.editData.title,expression:"post.editData.title"}],domProps:{value:a.editData.title},on:{input:function(t){t.target.composing||e.$set(a.editData,"title",t.target.value)}}}):[e._v(e._s(a.title))]],2),t("td",[a.editing?t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.editData.content,expression:"post.editData.content"}],domProps:{value:a.editData.content},on:{input:function(t){t.target.composing||e.$set(a.editData,"content",t.target.value)}}}):[e._v(e._s(a.content))]],2),t("td",[e._v(e._s(e.formatDate(a.post_date)))]),t("td",[a.editing?[t("button",{on:{click:function(t){return e.saveEditForumPost(a)}}},[e._v("ä¿å­˜")]),t("button",{on:{click:function(t){return e.cancelEditForumPost(a)}}},[e._v("å–æ¶ˆ")])]:[t("button",{on:{click:function(t){return e.startEditForumPost(a)}}},[e._v("ç¼–è¾‘")]),t("button",{on:{click:function(t){return e.deleteForumPost(a.id)}}},[e._v("åˆ é™¤")])]],2)])})),0)])]):e._e()])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID4")]),t("th",[e._v("ç”¨æˆ·å")]),t("th",[e._v("å¯†ç ")]),t("th",[e._v("è§’è‰²")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("äº§å“åç§°")]),t("th",[e._v("äº§å“æè¿°")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("åƒåœ¾åç§°")]),t("th",[e._v("æ‰€å±åˆ†ç±»")]),t("th",[e._v("åˆ†ç±»è¯´æ˜")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("æ´»åŠ¨åç§°")]),t("th",[e._v("æ´»åŠ¨åœ°ç‚¹")]),t("th",[e._v("æ´»åŠ¨æè¿°")]),t("th",[e._v("å¼€å§‹æ—¥æœŸ")]),t("th",[e._v("ç»“æŸæ—¥æœŸ")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("ç‰©å“åç§°")]),t("th",[e._v("ç‰©å“æè¿°")]),t("th",[e._v("è”ç³»ç”µè¯")]),e._v(" "),t("th",[e._v("å‘å¸ƒæ—¥æœŸ")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("å•†å“åç§°")]),t("th",[e._v("æ•°é‡")]),t("th",[e._v("æ‰‹æœºå·")]),e._v(" "),t("th",[e._v("åœ°å€")]),t("th",[e._v("æ—¥æœŸ")]),t("th",[e._v("çŠ¶æ€")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("å‡ºè¡Œæ–¹å¼")]),t("th",[e._v("æ¯å…¬é‡Œå‡ç¢³é‡(kg)")]),t("th",[e._v("æ“ä½œ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("æ ‡é¢˜")]),t("th",[e._v("å†…å®¹")]),t("th",[e._v("å‘å¸ƒæ—¶é—´")]),t("th",[e._v("æ“ä½œ")])])])}],s=(a(4114),a(8992),a(4520),a(7550),a(4373)),i={name:"Admin",data(){return{currentTab:"users",tabs:[{id:"users",name:"ç”¨æˆ·ç®¡ç†"},{id:"products",name:"ç»¿è‰²äº§å“"},{id:"garbage",name:"åƒåœ¾åˆ†ç±»"},{id:"events",name:"ç¯ä¿æ´»åŠ¨"},{id:"items",name:"é—²ç½®ç‰©å“"},{id:"orders",name:"è®¢å•ç®¡ç†"},{id:"carbon",name:"å‡ç¢³è®¡ç®—å™¨"},{id:"forum",name:"è®ºå›ç®¡ç†"}],users:[],userSearch:"",showAddUser:!1,newUser:{username:"",password:"",isAdmin:0},originalProducts:[],productSearch:"",products:[],productSearch:"",showAddProduct:!1,newProduct:{name:"",description:""},originalGarbageItems:[],garbageSearch:"",garbageItems:[],garbageSearch:"",showAddGarbage:!1,newGarbageItem:{name:"",category:"å¯å›æ”¶ç‰©",description:""},events:[],eventSearch:"",showAddEvent:!1,newEvent:{event_name:"",start_date:"",end_date:""},events:[],filteredEvents:[],newEvent:{event_name:"",start_date:"",end_date:"",location:"",description:""},items:[],filteredItems:[],itemSearch:"",showAddItem:!1,newItem:{item_name:"",item_description:"",phone_number:""},orders:[],orderSearch:"",filteredOrders:[],showAddOrder:!1,selectedOrderId:null,rejectReason:"",showRejectDialog:!1,selectedOrderId:null,rejectReason:"",newOrder:{user_id:"",order_date:"",total_amount:0},travelTypes:[],newTravelType:{travel_type:"",carbon_reduction_per_unit:0},showAddTravelType:!1,forumPosts:[],forumSearch:"",showAddForumPost:!1,newForumPost:{title:"",content:""},editingForumPost:null}},computed:{},mounted(){this.fetchUsers(),this.fetchProducts(),this.fetchGarbageItems(),this.fetchEvents(),this.fetchForumPosts()},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("userRole"),this.$router.push("/login")},fetchUsers(){s.A.get("/api/admin/users").then((e=>{this.users=e.data.map((e=>({...e,editing:!1,editData:null})))}))},searchUsers(){s.A.get(`/api/admin/users?search=${this.userSearch}`).then((e=>{this.users=e.data}))},addUser(){const e=this.users.some((e=>e.username.toLowerCase()===this.newUser.username.toLowerCase()));e?alert("è¯¥ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ç”¨æˆ·å"):s.A.post("/api/admin/users",this.newUser).then((()=>{this.fetchUsers(),this.showAddUser=!1,this.newUser={username:"",password:"",isAdmin:!1}})).catch((e=>{console.error("æ·»åŠ ç”¨æˆ·å¤±è´¥:",e),alert("æ·»åŠ ç”¨æˆ·å¤±è´¥ï¼Œè¯·é‡è¯•")}))},editUser(e){},deleteUser(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç”¨æˆ·å—ï¼Ÿ")&&s.A.delete(`/api/admin/users/${e}`).then((()=>{this.fetchUsers()}))},startEdit(e){this.$set(e,"editing",!0),this.$set(e,"editData",{username:e.username,password:e.password,isAdmin:e.isAdmin})},saveEdit(e){s.A.put(`/api/admin/users/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchUsers()})).catch((e=>{console.error("æ›´æ–°ç”¨æˆ·å¤±è´¥:",e)}))},cancelEdit(e){e.editing=!1},fetchUsers(){s.A.get("/api/admin/users").then((e=>{this.users=e.data.map((e=>({...e,editing:!1,editData:null})))}))},fetchGarbageItems(){s.A.get("/api/garbage-items").then((e=>{this.originalGarbageItems=e.data.map((e=>({...e,editing:!1,editData:null}))),this.garbageItems=[...this.originalGarbageItems]}))},searchGarbageItems(){this.garbageSearch?this.garbageItems=this.originalGarbageItems.filter((e=>e.name&&e.name.toLowerCase().includes(this.garbageSearch.toLowerCase()))):this.garbageItems=[...this.originalGarbageItems]},addGarbageItem(){s.A.post("/api/garbage-items",this.newGarbageItem).then((()=>{this.fetchGarbageItems(),this.showAddGarbage=!1,this.newGarbageItem={name:"",category:"å¯å›æ”¶ç‰©",description:""}}))},startEditGarbageItem(e){this.$set(e,"editing",!0),this.$set(e,"editData",{name:e.name,category:e.category,description:e.description})},saveEditGarbageItem(e){s.A.put(`/api/garbage-items/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchGarbageItems()}))},cancelEditGarbageItem(e){e.editing=!1},deleteGarbageItem(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåƒåœ¾é¡¹å—ï¼Ÿ")&&s.A.delete(`/api/garbage-items/${e}`).then((()=>{this.fetchGarbageItems()}))},fetchProducts(){s.A.get("/api/admin/products").then((e=>{this.originalProducts=e.data.map((e=>({...e,editing:!1,editData:null}))),this.products=[...this.originalProducts]}))},searchProducts(){this.productSearch?this.products=this.originalProducts.filter((e=>e.name&&e.name.toLowerCase().includes(this.productSearch.toLowerCase()))):this.products=[...this.originalProducts]},addProduct(){s.A.post("/api/admin/products",this.newProduct).then((()=>{this.fetchProducts(),this.showAddProduct=!1,this.newProduct={name:"",description:""}}))},startEditProduct(e){this.$set(e,"editing",!0),this.$set(e,"editData",{name:e.name,description:e.description})},saveEditProduct(e){s.A.put(`/api/admin/products/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchProducts()}))},cancelEditProduct(e){e.editing=!1},deleteProduct(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº§å“å—ï¼Ÿ")&&s.A.delete(`/api/admin/products/${e}`).then((()=>{this.fetchProducts()}))},fetchEvents(){s.A.get("/api/admin/events").then((e=>{this.events=e.data.map((e=>({...e,editing:!1,tempData:{}}))),this.filteredEvents=[...this.events]})).catch((e=>{console.error("è·å–ç¯ä¿æ´»åŠ¨æ•°æ®æ—¶å‡ºé”™:",e)}))},addEvent(){s.A.post("/api/admin/events",this.newEvent).then((()=>{this.fetchEvents(),this.showAddEvent=!1,this.newEvent={event_name:"",start_date:"",end_date:""}})).catch((e=>{console.error("æ·»åŠ ç¯ä¿æ´»åŠ¨æ—¶å‡ºé”™:",e)}))},editEvent(e){e.editing=!0,e.tempData={event_name:e.event_name,start_date:e.start_date,end_date:e.end_date}},saveEditEvent(e){s.A.put(`/api/admin/events/${e.id}`,{event_name:e.tempData.event_name,start_date:e.tempData.start_date,end_date:e.tempData.end_date}).then((()=>{e.editing=!1,this.fetchEvents()})).catch((e=>{console.error("æ›´æ–°ç¯ä¿æ´»åŠ¨æ—¶å‡ºé”™:",e)}))},cancelEditEvent(e){e.editing=!1,Object.assign(e,e.tempData)},searchEvents(){this.eventSearch?this.filteredEvents=this.events.filter((e=>e.event_name&&e.event_name.toLowerCase().includes(this.eventSearch.toLowerCase()))):this.filteredEvents=[...this.events]},deleteEvent(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç¯ä¿æ´»åŠ¨å—ï¼Ÿ")&&s.A.delete(`/api/admin/events/${e}`).then((()=>{this.fetchEvents()})).catch((e=>{console.error("åˆ é™¤ç¯ä¿æ´»åŠ¨æ—¶å‡ºé”™:",e)}))},editEvent(e){e.editing=!0,e.tempData={event_name:e.event_name,location:e.location,description:e.description,start_date:e.start_date,end_date:e.end_date}},saveEditEvent(e){s.A.put(`/api/admin/events/${e.id}`,{event_name:e.tempData.event_name,location:e.tempData.location,description:e.tempData.description,start_date:e.tempData.start_date,end_date:e.tempData.end_date}).then((()=>{e.editing=!1,this.fetchEvents()})).catch((e=>{console.error("æ›´æ–°ç¯ä¿æ´»åŠ¨æ—¶å‡ºé”™:",e)}))},addEvent(){s.A.post("/api/admin/events",this.newEvent).then((()=>{this.fetchEvents(),this.showAddEvent=!1,this.newEvent={event_name:"",location:"",description:"",start_date:"",end_date:""}})).catch((e=>{console.error("æ·»åŠ ç¯ä¿æ´»åŠ¨æ—¶å‡ºé”™:",e)}))},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleString()},fetchItems(){s.A.get("/api/second-hand-items").then((e=>{this.items=e.data,this.filteredItems=[...this.items]}))},searchItems(){this.itemSearch?this.filteredItems=this.items.filter((e=>e.item_name&&e.item_name.includes(this.itemSearch))):this.filteredItems=[...this.items]},startEditItem(e){this.$set(e,"editing",!0),this.$set(e,"editData",{item_name:e.item_name,item_description:e.item_description})},saveEditItem(e){s.A.put(`/api/second-hand-items/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchItems()}))},cancelEditItem(e){e.editing=!1},deleteItem(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç‰©å“å—ï¼Ÿ")&&s.A.delete(`/api/second-hand-items/${e}`).then((()=>{this.fetchItems()}))},addItem(){s.A.post("/api/second-hand-items",this.newItem).then((()=>{this.fetchItems(),this.showAddItem=!1,this.newItem={item_name:"",item_description:"",phone_number:""}}))},startEditItem(e){this.$set(e,"editing",!0),this.$set(e,"editData",{item_name:e.item_name,item_description:e.item_description,phone_number:e.phone_number})},saveEditItem(e){s.A.put(`/api/second-hand-items/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchItems()}))},addItem(){s.A.post("/api/second-hand-items",this.newItem).then((e=>{this.fetchItems(),this.showAddItem=!1,this.newItem={item_name:"",item_description:""}})).catch((e=>{console.error("æ·»åŠ é—²ç½®ç‰©å“æ—¶å‡ºé”™:",e.response?.data||e.message),alert("æ·»åŠ å¤±è´¥: "+(e.response?.data||e.message))}))},approveOrder(e){s.A.put(`/api/admin/reservation-orders/${e}/approve`).then((()=>{this.fetchOrders()}))},rejectOrder(e){this.selectedOrderId=e,this.showRejectDialog=!0},confirmReject(){s.A.put(`/api/admin/reservation-orders/${this.selectedOrderId}/reject`,{reason:this.rejectReason},{headers:{"Content-Type":"application/json"}}).then((()=>{this.showRejectDialog=!1,this.rejectReason="",this.fetchOrders()})).catch((e=>{console.error("æ‹’ç»è®¢å•å¤±è´¥:",e)}))},fetchOrders(){s.A.get("/api/admin/reservation-orders").then((e=>{this.orders=e.data.sort(((e,t)=>"å¾…å®¡æ ¸"===e.status&&"å¾…å®¡æ ¸"!==t.status?-1:"å¾…å®¡æ ¸"!==e.status&&"å¾…å®¡æ ¸"===t.status?1:new Date(t.order_date)-new Date(e.order_date))),this.filteredOrders=[...this.orders]}))},searchOrders(){this.orderSearch?this.filteredOrders=this.orders.filter((e=>e.product_name&&e.product_name.includes(this.orderSearch))).sort(((e,t)=>"å¾…å®¡æ ¸"===e.status&&"å¾…å®¡æ ¸"!==t.status?-1:"å¾…å®¡æ ¸"!==e.status&&"å¾…å®¡æ ¸"===t.status?1:new Date(t.order_date)-new Date(e.order_date))):this.filteredOrders=[...this.orders]},approveOrder(e){s.A.put(`/api/admin/reservation-orders/${e}/approve`).then((()=>{this.fetchOrders()}))},rejectOrder(e){this.selectedOrderId=e,this.showRejectDialog=!0},confirmReject(){s.A.put(`/api/admin/reservation-orders/${this.selectedOrderId}/reject`,{reason:this.rejectReason},{headers:{"Content-Type":"application/json"}}).then((()=>{this.showRejectDialog=!1,this.rejectReason="",this.fetchOrders()})).catch((e=>{console.error("æ‹’ç»è®¢å•å¤±è´¥:",e)}))},editTravelType(e){this.$set(e,"editing",!0),this.$set(e,"editData",{travel_type:e.travel_type,carbon_reduction_per_unit:e.carbon_reduction_per_unit})},saveTravelType(e){s.A.put(`/api/admin/carbon-calculator/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchTravelTypes()}))},cancelEditTravelType(e){e.editing=!1},deleteTravelType(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‡ºè¡Œæ–¹å¼å—ï¼Ÿ")&&s.A.delete(`/api/admin/carbon-calculator/${e}`).then((()=>{this.fetchTravelTypes()}))},fetchTravelTypes(){s.A.get("/api/admin/carbon-calculator").then((e=>{this.travelTypes=e.data})).catch((e=>{console.error("è·å–å‡ºè¡Œæ–¹å¼æ•°æ®å¤±è´¥:",e)}))},addTravelType(){s.A.post("/api/admin/carbon-calculator",this.newTravelType).then((()=>{this.fetchTravelTypes(),this.showAddTravelType=!1,this.newTravelType={travel_type:"",carbon_reduction_per_unit:0}}))},addForumPost(){s.A.post("/api/admin/forum-posts",this.newForumPost).then((()=>{this.fetchForumPosts(),this.showAddForumPost=!1,this.newForumPost={title:"",content:""}})).catch((e=>{console.error("æ·»åŠ å¸–å­å¤±è´¥:",e)}))},saveEditForumPost(e){s.A.put(`/api/admin/forum-posts/${e.id}`,e.editData).then((()=>{this.fetchForumPosts(),e.editing=!1})).catch((e=>{console.error("æ›´æ–°å¸–å­å¤±è´¥:",e)}))},deleteForumPost(e){s.A.delete(`/api/admin/forum-posts/${e}`).then((()=>{this.fetchForumPosts()})).catch((e=>{console.error("åˆ é™¤å¸–å­å¤±è´¥:",e)}))},fetchForumPosts(){s.A.get("/api/admin/forum-posts").then((e=>{this.forumPosts=e.data.map((e=>({...e,editing:!1,editData:null})))}))},searchForumPosts(){this.forumSearch?this.forumPosts=this.forumPosts.filter((e=>e.title&&e.title.includes(this.forumSearch))):this.fetchForumPosts()},addForumPost(){s.A.post("/api/admin/forum-posts",this.newForumPost).then((()=>{this.fetchForumPosts(),this.showAddForumPost=!1,this.newForumPost={title:"",content:""}}))},startEditForumPost(e){this.$set(e,"editing",!0),this.$set(e,"editData",{title:e.title,content:e.content})},saveEditForumPost(e){s.A.put(`/api/admin/forum-posts/${e.id}`,e.editData).then((()=>{Object.assign(e,e.editData),e.editing=!1,this.fetchForumPosts()}))},cancelEditForumPost(e){e.editing=!1},deleteForumPost(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¸–å­å—ï¼Ÿ")&&s.A.delete(`/api/admin/forum-posts/${e}`).then((()=>{this.fetchForumPosts()}))}},created(){this.fetchItems(),this.fetchOrders()},created(){this.fetchItems(),this.fetchOrders(),this.fetchTravelTypes()}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"360fe11e",null),u=c.exports},5399:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});a(1454);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"carbon-calculator"},[t("h1",[e._v("å‡ç¢³è®¡ç®—å™¨")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.calculateCarbonFootprint.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",[e._v("å‡ºè¡Œæ–¹å¼")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTravelType,expression:"selectedTravelType"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedTravelType=t.target.multiple?a:a[0]}}},e._l(e.travelTypes,(function(a){return t("option",{key:a.id,domProps:{value:a}},[e._v(" "+e._s(a.travel_type)+" ")])})),0)]),t("div",{staticClass:"form-group"},[t("label",[e._v("è·ç¦»(km)")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.distance,expression:"distance",modifiers:{number:!0}}],attrs:{type:"number",min:"0",placeholder:"ï¼ˆå…¬é‡Œï¼‰"},domProps:{value:e.distance},on:{input:function(t){t.target.composing||(e.distance=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),t("button",{attrs:{type:"submit"}},[e._v("è®¡ç®—ç¢³è¶³è¿¹")])]),e.carbonFootprint?t("div",{staticClass:"result-container"},[t("p",[e._v("ğŸŒ± æ­å–œï¼æ‚¨ä»Šæ—¥å‡å°‘äº† "+e._s(e.carbonFootprint)+" åƒå…‹äºŒæ°§åŒ–ç¢³æ’æ”¾ï¼Œä¸ºåœ°çƒå‡è´Ÿå•¦ï¼")]),e.carbonFootprint<1?t("p",{staticClass:"suggestion"},[e._v("âœ¨ å°è´´å£«ï¼šçŸ­é€”å‡ºè¡Œè¯•è¯•æ­¥è¡Œæˆ–éª‘è¡Œå§ï¼æ—¢èƒ½é”»ç‚¼èº«ä½“ï¼Œåˆèƒ½æ”¶è·æ²¿é€”é£æ™¯~")]):e.carbonFootprint<5?t("p",{staticClass:"suggestion"},[e._v("ğŸšŒ å¤ªæ£’äº†ï¼æ‚¨çš„é€‰æ‹©è®©åŸå¸‚å°‘äº†ä¸€è¾†ç§å®¶è½¦çš„å°¾æ°”ï¼Œç»§ç»­ä¿æŒç»¿è‰²å‡ºè¡Œå¥½ä¹ æƒ¯ï¼")]):e.carbonFootprint<10?t("p",{staticClass:"suggestion"},[e._v("ğŸ¥— ç¯ä¿è¾¾äººï¼å¦‚æœæ¯å‘¨å°‘åƒä¸€å¤©è‚‰ï¼Œç›¸å½“äºä¸€å¹´ç§äº†10æ£µæ ‘å“¦ï¼")]):t("p",{staticClass:"suggestion"},[e._v("ğŸ† å‡ç¢³å† å†›ï¼æ‚¨çš„è´¡çŒ®ç›¸å½“äºç§äº†ä¸€ç‰‡å°æ£®æ—ï¼è¯•è¯•å…³æ‰ä¸ç”¨çš„ç”µå™¨ï¼Œè®©èŠ‚èƒ½æˆä¸ºæ–°æ—¶å°š~")])]):e._e()])},r=[],s=a(4373),i={data(){return{travelTypes:[],selectedTravelType:null,distance:0,carbonFootprint:null}},mounted(){this.fetchTravelTypes()},methods:{fetchTravelTypes(){s.A.get("/api/carbon-calculator/travel-types").then((e=>{this.travelTypes=e.data})).catch((e=>{console.error("è·å–å‡ºè¡Œæ–¹å¼æ•°æ®æ—¶å‡ºé”™:",e)}))},calculateCarbonFootprint(){this.selectedTravelType&&this.distance>0?this.carbonFootprint=this.selectedTravelType.carbon_reduction_per_unit*this.distance:this.carbonFootprint=null}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"31969832",null),u=c.exports},4858:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"garbage-classification"},[t("h1",{staticClass:"title"},[e._v("åƒåœ¾åˆ†ç±»ä»‹ç»å’ŒæŒ‡å—")]),t("div",{staticClass:"search-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{placeholder:"è¾“å…¥åƒåœ¾åç§°æŸ¥è¯¢åˆ†ç±»"},domProps:{value:e.searchText},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGarbageItems.apply(null,arguments)},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),t("button",{on:{click:e.searchGarbageItems}},[e._v("æœç´¢")]),t("button",{on:{click:e.resetSearch}},[e._v("é‡ç½®")])]),e.loading?t("div",{staticClass:"loading"},[e._v("åŠ è½½ä¸­...")]):e.error?t("div",{staticClass:"error"},[t("p",[e._v("è·å–æ•°æ®æ—¶å‡ºé”™ï¼š"+e._s(e.error))])]):t("table",{staticClass:"product-table"},[e._m(0),t("tbody",e._l(e.garbageItems,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.id))]),t("td",[e._v(e._s(a.name))]),t("td",[e._v(e._s(a.category))]),t("td",[e._v(e._s(a.description))])])})),0)])])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ID")]),t("th",[e._v("åƒåœ¾åç§°")]),t("th",[e._v("æ‰€å±åˆ†ç±»")]),t("th",[e._v("åˆ†ç±»è¯´æ˜")])])])}],s=a(4373),i={data(){return{garbageItems:[],loading:!0,error:null,searchText:""}},mounted(){this.fetchGarbageItems()},methods:{fetchGarbageItems(){s.A.get("/api/garbage-items").then((e=>{this.garbageItems=e.data})).catch((e=>{this.error=e.message})).finally((()=>{this.loading=!1}))},searchGarbageItems(){this.searchText.trim()?(this.loading=!0,s.A.get(`/api/garbage-items/search?search=${this.searchText}`).then((e=>{this.garbageItems=e.data})).catch((e=>{this.error=e.message})).finally((()=>{this.loading=!1}))):this.fetchGarbageItems()},resetSearch(){this.searchText="",this.fetchGarbageItems()}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"2ccfad32",null),u=c.exports},6487:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("ç»¿è‰²è®ºå›")]),t("h2",[e._v("å‘è¡¨å¸–å­")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.postMessage.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{placeholder:"å¸–å­æ ‡é¢˜",maxlength:"30"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),t("span",{staticClass:"word-count"},[e._v(e._s(e.title.length)+"/30")])]),t("div",{staticClass:"input-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"å¸–å­å†…å®¹",maxlength:"255"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),t("span",{staticClass:"word-count"},[e._v(e._s(e.content.length)+"/255")])]),t("button",{attrs:{type:"submit"}},[e._v("å‘è¡¨")])]),e.postSuccessMessage?t("div",{staticClass:"success-message"},[e._v(e._s(e.postSuccessMessage))]):e._e(),e.postErrorMessage?t("div",{staticClass:"error-message"},[e._v(e._s(e.postErrorMessage))]):e._e(),t("h2",[e._v("å¸–å­åˆ—è¡¨")]),e.loading?t("div",[e._v("åŠ è½½ä¸­...")]):e.error?t("div",[t("p",[e._v("è·å–æ•°æ®æ—¶å‡ºé”™ï¼š"+e._s(e.error))])]):t("ul",e._l(e.sortedPosts,(function(a){return t("li",{key:a.id},[t("h3",[e._v(e._s(a.title))]),t("p",[e._v(e._s(a.content))]),t("small",[e._v("å‘å¸ƒæ—¶é—´: "+e._s(e.formatDate(a.post_date)))])])})),0)])},r=[],s=a(4373),i={data(){return{title:"",content:"",posts:[],loading:!0,error:null,postSuccessMessage:"",postErrorMessage:""}},computed:{sortedPosts(){return this.posts.slice().sort(((e,t)=>new Date(t.post_date)-new Date(e.post_date)))}},mounted(){this.fetchPosts()},methods:{fetchPosts(){s.A.get("/api/forum-posts").then((e=>{this.posts=e.data})).catch((e=>{this.error=e.message})).finally((()=>{this.loading=!1}))},postMessage(){return this.title&&this.content?this.title.length>30?(this.postErrorMessage="æ ‡é¢˜ä¸èƒ½è¶…è¿‡ 30 å­—ï¼Œè¯·ä¿®æ”¹ï¼",void(this.postSuccessMessage="")):this.content.length>255?(this.postErrorMessage="å†…å®¹ä¸èƒ½è¶…è¿‡ 255 å­—ï¼Œè¯·ä¿®æ”¹ï¼",void(this.postSuccessMessage="")):void s.A.post("/api/forum-postsqd",{title:this.title,content:this.content}).then((e=>{console.log("å¸–å­å‘å¸ƒæˆåŠŸ:",e.data),this.title="",this.content="",this.fetchPosts(),this.postSuccessMessage="å¸–å­å‘å¸ƒæˆåŠŸï¼",this.postErrorMessage="",setTimeout((()=>{this.postSuccessMessage=""}),3e3)})).catch((e=>{console.error("å‘å¸ƒå¸–å­æ—¶å‡ºé”™:",e),this.postErrorMessage="å¸–å­å‘å¸ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼",this.postSuccessMessage="",setTimeout((()=>{this.postErrorMessage=""}),3e3)})):(this.postErrorMessage="æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œè¯·å¡«å†™å®Œæ•´ï¼",void(this.postSuccessMessage=""))},formatDate(e){return e?new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e)):""}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"795efeac",null),u=c.exports},2216:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"green-recommendation"},[t("h1",{staticClass:"title"},[e._v("ç»¿è‰²æ¨è")]),e.loading?t("div",{staticClass:"loading"},[e._v("åŠ è½½ä¸­...")]):e.error?t("div",{staticClass:"error"},[t("p",[e._v("è·å–æ•°æ®æ—¶å‡ºé”™ï¼š"+e._s(e.error))])]):t("table",{staticClass:"product-table"},[e._m(0),t("tbody",e._l(e.greenProducts,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.name))]),t("td",[e._v(e._s(a.description))])])})),0)])])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("åç§°")]),t("th",[e._v("æè¿°")])])])}],s=a(4373),i={data(){return{greenProducts:[],loading:!0,error:null}},mounted(){this.fetchGreenProducts()},methods:{fetchGreenProducts(){s.A.get("/api/green-products").then((e=>{this.greenProducts=e.data})).catch((e=>{this.error=e.message})).finally((()=>{this.loading=!1}))}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"70001cc4",null),u=c.exports},7238:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"video-container"},[t("video",{staticClass:"bg-video",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[t("source",{attrs:{src:a(7913),type:"video/mp4"}})])]),t("div",{staticClass:"card"},[t("h1",[e._v("ç™»å½•")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"ç”¨æˆ·å"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("span",{staticClass:"input-icon"},[e._v("ğŸ‘¤")])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"å¯†ç "},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("span",{staticClass:"input-icon"},[e._v("ğŸ”’")])]),e._m(0)]),e.errorMessage?t("div",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))]):e._e()])])},r=[function(){var e=this,t=e._self._c;return t("button",{staticClass:"btn-gradient",attrs:{type:"submit"}},[t("span",[e._v("ç™»å½•")])])}],s=(a(4114),a(4373)),i={data(){return{username:"",password:"",errorMessage:""}},methods:{login(){s.A.post("/api/login",{username:this.username,password:this.password}).then((e=>{e.data.error?this.errorMessage=e.data.error:(localStorage.setItem("userRole",e.data.role),"admin"===e.data.role?this.$router.push("/admin"):this.$router.push("/green-recommendation"))})).catch((e=>{this.errorMessage="ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}))}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"f0a10efa",null),u=c.exports},6152:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"low-carbon-life"},[t("h1",[e._v("ä½ç¢³ç”Ÿæ´»")]),t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"event-section"},[t("h2",[e._v("ç¯ä¿æ´»åŠ¨")]),e.loading?t("div",[e._v("åŠ è½½ä¸­...")]):e.error?t("div",[t("p",[e._v("è·å–æ•°æ®æ—¶å‡ºé”™ï¼š"+e._s(e.error))])]):t("table",{staticClass:"event-table"},[e._m(0),t("tbody",e._l(e.environmentalEvents,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.event_name))]),t("td",[e._v(e._s(a.location))]),t("td",[e._v(e._s(e.formatDate(a.start_date)))]),t("td",[e._v(e._s(e.calculateCountdown(a.start_date)))])])})),0)])]),t("div",{staticClass:"item-section"},[t("h2",[e._v("å‘å¸ƒé—²ç½®ç‰©å“")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.publishItem.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],attrs:{placeholder:"ç‰©å“åç§°"},domProps:{value:e.itemName},on:{input:function(t){t.target.composing||(e.itemName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{placeholder:"è”ç³»ç”µè¯",maxlength:"11"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.itemDescription,expression:"itemDescription"}],attrs:{placeholder:"ç‰©å“æè¿°"},domProps:{value:e.itemDescription},on:{input:function(t){t.target.composing||(e.itemDescription=t.target.value)}}}),t("button",{attrs:{type:"submit"}},[e._v("å‘å¸ƒ")])]),t("h2",[e._v("æŸ¥çœ‹å‘å¸ƒçš„é—²ç½®ç‰©å“")]),e.loadingSecondHandItems?t("div",[e._v("åŠ è½½ä¸­...")]):e.errorSecondHandItems?t("div",[t("p",[e._v("è·å–é—²ç½®ç‰©å“æ•°æ®æ—¶å‡ºé”™ï¼š"+e._s(e.errorSecondHandItems))])]):t("table",{staticClass:"second-hand-table"},[e._m(1),t("tbody",e._l(e.secondHandItems,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.item_name))]),t("td",[e._v(e._s(a.item_description))]),t("td",[e._v(e._s(a.phone_number))]),t("td",[e._v(e._s(e.formatDate(a.publish_date)))])])})),0)])])])])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("æ´»åŠ¨åç§°")]),t("th",[e._v("æ´»åŠ¨åœ°ç‚¹")]),t("th",[e._v("æ´»åŠ¨å¼€å§‹æ—¶é—´")]),t("th",[e._v("æ´»åŠ¨å€’è®¡æ—¶")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ç‰©å“åç§°")]),t("th",[e._v("ç‰©å“æè¿°")]),t("th",[e._v("è”ç³»ç”µè¯")]),t("th",[e._v("å‘å¸ƒæ—¥æœŸ")])])])}],s=a(4373),i={data(){return{environmentalEvents:[],itemName:"",itemDescription:"",loading:!0,error:null,secondHandItems:[],loadingSecondHandItems:!0,errorSecondHandItems:null,phoneNumber:""}},mounted(){this.fetchEnvironmentalEvents(),this.fetchSecondHandItems()},methods:{formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},fetchEnvironmentalEvents(){s.A.get("/api/environmental-events").then((e=>{this.environmentalEvents=e.data})).catch((e=>{this.error=e.message})).finally((()=>{this.loading=!1}))},calculateCountdown(e){const t=new Date,a=new Date(e)-t;if(a<=0)return"å·²å¼€å§‹";const n=Math.floor(a/864e5),r=Math.floor(a%864e5/36e5),s=Math.floor(a%36e5/6e4);return`${n}å¤©${r}å°æ—¶${s}åˆ†é’Ÿ`},publishItem(){this.itemName&&this.itemDescription?this.phoneNumber&&/^1[3-9]\d{9}$/.test(this.phoneNumber)?s.A.post("/api/second-hand-items",{item_name:this.itemName,item_description:this.itemDescription,phone_number:this.phoneNumber}).then((e=>{console.log("é—²ç½®ç‰©å“å‘å¸ƒæˆåŠŸ:",e.data),this.itemName="",this.itemDescription="",this.phoneNumber="",this.fetchSecondHandItems()})).catch((e=>{console.error("å‘å¸ƒé—²ç½®ç‰©å“æ—¶å‡ºé”™:",e);const t=e.response?.data?.message||e.response?.data||"å‘å¸ƒå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜";alert(t)})):alert("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·"):alert("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯")},fetchSecondHandItems(){s.A.get("/api/second-hand-items").then((e=>{this.secondHandItems=e.data})).catch((e=>{this.errorSecondHandItems=e.message})).finally((()=>{this.loadingSecondHandItems=!1}))}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"777c95a8",null),u=c.exports},3972:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register-container"},[t("div",{staticClass:"video-container"},[t("video",{staticClass:"bg-video",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[t("source",{attrs:{src:a(7913),type:"video/mp4"}})])]),t("div",{staticClass:"card"},[t("h1",[e._v("æ³¨å†Œ")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"ç”¨æˆ·å"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("span",{staticClass:"input-icon"},[e._v("ğŸ‘¤")])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"å¯†ç "},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("span",{staticClass:"input-icon"},[e._v("ğŸ”’")])]),e._m(0)]),e.errorMessage?t("div",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))]):e._e(),e.successMessage?t("div",{staticClass:"success-message"},[e._v(e._s(e.successMessage))]):e._e()])])},r=[function(){var e=this,t=e._self._c;return t("button",{staticClass:"btn-gradient",attrs:{type:"submit"}},[t("span",[e._v("æ³¨å†Œ")])])}],s=(a(4114),a(4373)),i={data(){return{username:"",password:"",errorMessage:"",successMessage:""}},methods:{register(){if(!this.username||!this.password)return void(this.errorMessage="ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º");const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=/^1[3-9]\d{9}$/;if(!e.test(this.username)&&!t.test(this.username))return void(this.errorMessage="ç”¨æˆ·åå¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æˆ–æ‰‹æœºå·");const a=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,15}$/;a.test(this.password)?s.A.post("/api/register",{username:this.username,password:this.password}).then((e=>{e.data&&e.data.message&&(this.successMessage="æ³¨å†ŒæˆåŠŸï¼Œæ­£åœ¨è·³è½¬ç™»å½•é¡µé¢",this.errorMessage="",setTimeout((()=>{this.$router.push("/login")}),2e3))})).catch((e=>{e.response&&400===e.response.status?this.errorMessage="ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ç”¨æˆ·å":this.errorMessage="æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",this.successMessage=""})):this.errorMessage="å¯†ç å¿…é¡»ä¸º6-15ä½ä¸”åŒ…å«æ•°å­—ã€å¤§å°å†™å­—æ¯"}}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"6efe049e",null),u=c.exports},3993:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});a(4114);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"choice-container"},[t("div",{staticClass:"video-container"},[t("video",{staticClass:"bg-video",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[t("source",{attrs:{src:a(7913),type:"video/mp4"}})])]),t("div",{staticClass:"card"},[t("h1",[e._v("æ¬¢è¿æ¥åˆ°ç»¿è‰²ç”Ÿæ´»å¹³å°")]),t("div",{staticClass:"button-group"},[t("button",{staticClass:"btn-gradient",on:{click:function(t){return e.$router.push("/register")}}},[t("span",[e._v("æ³¨å†Œ")])]),t("button",{staticClass:"btn-gradient",on:{click:function(t){return e.$router.push("/login")}}},[t("span",[e._v("ç™»å½•")])])])])])},r=[],s=a(1656),i={},o=(0,s.A)(i,n,r,!1,null,"375dd235",null),d=o.exports},5747:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reservation-order"},[t("h1",[e._v("é¢„çº¦ä¸‹å•")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.submitOrder.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.productName,expression:"productName"}],attrs:{placeholder:"å•†å“åç§°"},domProps:{value:e.productName},on:{input:function(t){t.target.composing||(e.productName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"quantity",modifiers:{number:!0}}],attrs:{type:"number",min:"1",placeholder:"å•†å“æ•°é‡"},domProps:{value:e.quantity},on:{input:function(t){t.target.composing||(e.quantity=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{placeholder:"æ‰‹æœºå·ç ",maxlength:"11"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],attrs:{placeholder:"æ”¶è´§ä¿¡æ¯"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),e.errorMessage?t("div",[e._v(e._s(e.errorMessage))]):e._e(),t("button",{attrs:{type:"submit"}},[e._v("æäº¤è®¢å•")])]),e.showSuccessMessage?t("div",{staticClass:"success-messages"},[t("div",{class:{"fade-out":!e.isMessageVisible}},[e._v(e._s(e.successMessages[0]))])]):e._e(),e.rejectedOrders.length>0?t("div",{staticClass:"rejected-orders"},[t("h3",[e._v("è¢«æ‹’ç»çš„è®¢å•")]),t("table",[e._m(0),t("tbody",e._l(e.rejectedOrders,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.product_name))]),t("td",[e._v(e._s(a.quantity))]),t("td",[e._v(e._s(e.formatDate(a.order_date)))]),t("td",[e._v(e._s(a.phone_number))]),t("td",{staticClass:"rejection-reason"},[e._v(e._s(a.rejection_reason))])])})),0)])]):e._e()])},r=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("å•†å“åç§°")]),t("th",[e._v("æ•°é‡")]),t("th",[e._v("ä¸‹å•æ—¥æœŸ")]),t("th",[e._v("æ‰‹æœºå·")]),t("th",[e._v("æ‹’ç»åŸå› ")])])])}],s=(a(4114),a(1454),a(4373)),i={data(){return{productName:"",quantity:1,phoneNumber:"",address:"",successMessages:[],errorMessage:"",showSuccessMessage:!1,isMessageVisible:!0,rejectedOrders:[]}},methods:{fetchRejectedOrders(){s.A.get("/api/rejected-orders").then((e=>{this.rejectedOrders=e.data.map((e=>(e.phone_number&&11===e.phone_number.length&&(e.phone_number=e.phone_number.substring(0,3)+"****"+e.phone_number.substring(7)),e)))})).catch((e=>{console.error("è·å–è¢«æ‹’ç»è®¢å•å¤±è´¥:",e)}))},submitOrder(){this.productName&&this.address&&this.phoneNumber?this.quantity<1?this.errorMessage="å•†å“æ•°é‡å¿…é¡»å¤§äºæˆ–ç­‰äº 1":/^1[3-9]\d{9}$/.test(this.phoneNumber)?s.A.post("/api/reservation-orders",{product_name:this.productName,quantity:this.quantity,address:this.address,phone_number:this.phoneNumber}).then((e=>{this.successMessages=[],this.successMessages.push("è®¢å•æäº¤æˆåŠŸï¼Œç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸"),this.productName="",this.quantity=1,this.phoneNumber="",this.address="",this.errorMessage="",this.showSuccessMessage=!0,this.isMessageVisible=!0,setTimeout((()=>{this.isMessageVisible=!1,setTimeout((()=>{this.showSuccessMessage=!1}),1e3)}),1200)})).catch((e=>{this.errorMessage="è®¢å•æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",console.error("æäº¤è®¢å•æ—¶å‡ºé”™:",e)})):this.errorMessage="è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ":this.errorMessage="å•†å“åç§°ã€æ‰‹æœºå·å’Œæ”¶è´§ä¿¡æ¯éƒ½ä¸èƒ½ä¸ºç©º"},formatDate(e){return e?new Date(e).toLocaleDateString():""}},created(){this.fetchRejectedOrders()}},o=i,d=a(1656),c=(0,d.A)(o,n,r,!1,null,"00c98db3",null),u=c.exports},8955:function(e,t,a){"use strict";var n=a(6848),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.shouldHideNavbar?e._e():t("navbar",{attrs:{msg2:"AAA"}}),t("div",{staticClass:"container"},[t("div",{staticClass:"right",staticStyle:{width:"100%"}},[t("router-view")],1)])],1)},s=[],i={data(){return{user:{id:1}}},computed:{shouldHideNavbar(){return this.$route.meta.hideNavbar}},created(){this.$router.beforeEach(((e,t,a)=>{a()}))},methods:{test(){this.$axios.get("/api/selectAll").then((e=>{this.user=e.data,alert(e.data)}))}},components:{navbar:()=>a.e(863).then(a.bind(a,9863)),leftnavbar:()=>a.e(349).then(a.bind(a,4349))}},o=i,d=a(1656),c=(0,d.A)(o,r,s,!1,null,null,null),u=c.exports,l=a(6178),m=a(3993),p=a(3972),v=a(7238),h=a(3711),_=a(2216),g=a(4858),f=a(6152),b=a(5747),w=a(5399),y=a(6487);n.Ay.use(l.Ay);const D=l.Ay.prototype.push;l.Ay.prototype.push=function(e){return D.call(this,e).catch((e=>{if("NavigationDuplicated"===e.name)return e;throw e}))};const P=l.Ay.prototype.replace;l.Ay.prototype.replace=function(e){return P.call(this,e).catch((e=>{if("NavigationDuplicated"===e.name)return e;throw e}))};const A=[{path:"/",redirect:"/register-login-choice"},{path:"/register-login-choice",name:"RegisterLoginChoice",component:m["default"],meta:{hideNavbar:!0}},{path:"/register",name:"Register",component:p["default"],meta:{hideNavbar:!0}},{path:"/login",name:"Login",component:v["default"],meta:{hideNavbar:!0}},{path:"/admin",name:"Admin",component:h["default"],meta:{requiresAuth:!0,role:"admin",hideNavbar:!0}},{path:"/green-recommendation",name:"GreenRecommendation",component:_["default"],meta:{requiresAuth:!0,role:"user"}},{path:"/garbage-classification",name:"GarbageClassification",component:g["default"]},{path:"/low-carbon-life",name:"LowCarbonLife",component:f["default"]},{path:"/reservation-order",name:"ReservationOrder",component:b["default"]},{path:"/carbon-calculator",name:"CarbonCalculator",component:w["default"]},{path:"/green-forum",name:"GreenForum",component:y["default"]}],C=new l.Ay({routes:A});C.beforeEach(((e,t,a)=>{if(e.meta.requiresAuth){const t=localStorage.getItem("userRole");t?e.meta.role!==t?a("/login"):a():a("/login")}else a()}));var I=C,E=a(3518);n.Ay.use(E.Ay);var N=new E.Ay.Store({state:{users:[{id:1,name:"å¼ ä¸‰1"},{id:2,name:"å¼ ä¸‰2"}],menus:[]},getters:{getUsers(e){return e.users},getMenus(e){return e.menus}},mutations:{setMenus(e,t){e.menus=t}},actions:{},modules:{}});a(4114);function T(e,t,n){let r=this.$route.path.replace("/","");r!=e&&(I.addRoute({path:"/"+e,component:()=>a(9555)("./"+e)}),I.push({path:e,query:t}),document.title=n)}var k=a(4373);k.A.defaults.baseURL="http://374e506b.r3.cpolar.cn/greenlifehouduantest",n.Ay.config.productionTip=!1,n.Ay.prototype.to=T,new n.Ay({router:I,store:N,render:e=>e(u)}).$mount("#app")},9555:function(e,t,a){var n={"./Admin":[3711],"./Admin.vue":[3711],"./CarbonCalculator":[5399],"./CarbonCalculator.vue":[5399],"./GarbageClassification":[4858],"./GarbageClassification.vue":[4858],"./GreenForum":[6487],"./GreenForum.vue":[6487],"./GreenRecommendation":[2216],"./GreenRecommendation.vue":[2216],"./Left":[4349,349],"./Left.vue":[4349,349],"./Login":[7238],"./Login.vue":[7238],"./LowCarbonLife":[6152],"./LowCarbonLife.vue":[6152],"./Navbar":[9863,863],"./Navbar.vue":[9863,863],"./Register":[3972],"./Register.vue":[3972],"./RegisterLoginChoice":[3993],"./RegisterLoginChoice.vue":[3993],"./ReservationOrder":[5747],"./ReservationOrder.vue":[5747]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=9555,e.exports=r},7913:function(e,t,a){"use strict";e.exports=a.p+"media/å±±é¡¶é£æ™¯.08ed8c7c.mp4"}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,s){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],s=e[u][2];for(var o=!0,d=0;d<n.length;d++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[d])}))?n.splice(d--,1):(o=!1,s<i&&(i=s));if(o){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{349:"cddb6ca3",863:"89bb8576"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{349:"16cadfaf",863:"c9f56361"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="GLsystem:";a.l=function(n,r,s,i){if(e[n])e[n].push(r);else{var o,d;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+s){o=l;break}}o||(d=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[r];var m=function(t,a){o.onerror=o.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),d&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,r,s){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",a.nc&&(i.nonce=a.nc);var o=function(a){if(i.onerror=i.onload=null,"load"===a.type)r();else{var n=a&&a.type,o=a&&a.target&&a.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+o+")");d.name="ChunkLoadError",d.code="CSS_CHUNK_LOAD_FAILED",d.type=n,d.request=o,i.parentNode&&i.parentNode.removeChild(i),s(d)}};return i.onerror=i.onload=o,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var r=a[n],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){r=i[n],s=r.getAttribute("data-href");if(s===e||s===t)return r}},n=function(n){return new Promise((function(r,s){var i=a.miniCssF(n),o=a.p+i;if(t(i,o))return r();e(n,o,null,r,s)}))},r={524:0};a.f.miniCss=function(e,t){var a={349:1,863:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=n(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise((function(a,n){r=e[t]=[a,n]}));n.push(r[2]=s);var i=a.p+a.u(t),o=new Error,d=function(n){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,r[1](o)}};a.l(i,d,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,i=n[0],o=n[1],d=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(d)var u=d(a)}for(t&&t(n);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},n=self["webpackChunkGLsystem"]=self["webpackChunkGLsystem"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(8955)}));n=a.O(n)})();
//# sourceMappingURL=app.8a2796c8.js.map